stages:
  - build
  - test

# Vorlage f√ºr alle Jobs: Caching und Installation
.setup-template: &setup
  image: node:20-alpine  # <--- HIER IST DIE KORREKTUR
  cache:
    key:
      files:
        - teilzeit-ausbildungsrechner/package-lock.json
    paths:
      - teilzeit-ausbildungsrechner/node_modules/
  before_script:
    - cd teilzeit-ausbildungsrechner
    - npm install

# 1. Job: BUILD (aus der 'build'-Stage)
build-job:
  <<: *setup
  stage: build
  script:
    - echo "Building project with Vite..."
    - npm run build
  artifacts:
    paths:
      - teilzeit-ausbildungsrechner/dist/

# 2. Job: LINTER (aus der 'test'-Stage)
lint-job:
  <<: *setup
  stage: test
  script:
    - echo "Running all linters..."
    - npm run lint